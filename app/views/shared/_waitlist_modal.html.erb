<%# Waitlist Modal - wrap content in a modal dialog %>
<%# Usage: render "shared/waitlist_modal", lead: Lead.new %>
<%# Progressive enhancement: link fallback when JS fails, modal when JS works %>
<div data-controller="modal">
  <%# Trigger button - link fallback for when JS doesn't load %>
  <a href="<%= new_user_registration_path %>"
     data-action="click->modal#open"
     class="inline-flex items-center justify-center px-8 py-4 text-lg font-semibold text-white bg-blue-600 rounded-full hover:bg-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
    Join the Waitlist
  </a>

  <%# Modal dialog %>
  <div
    data-modal-target="dialog"
    data-action="click->modal#closeOnOutsideClick"
    class="hidden fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">

    <div class="relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-8" data-turbo-frame="waitlist_content">
      <%# Close button %>
      <button
        data-action="modal#close"
        class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors"
        aria-label="Close modal">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <%# Modal content - will be replaced by Turbo Stream %>
      <turbo-frame id="waitlist_content">
        <%= render "leads/form", lead: local_assigns[:lead] || Lead.new %>
      </turbo-frame>
    </div>
  </div>
</div>
