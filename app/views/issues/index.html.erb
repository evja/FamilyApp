<h2 class="text-2xl font-bold mb-6">Issues List</h2>


<%= link_to "+ New Issue", new_family_issue_path(@family), class: "mb-6 inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>

<%= "Add a help / how to ISSUES" %>

<table class="w-full table-auto border border-gray-300 text-sm">
  <thead>
    <tr class="bg-gray-100">
      <th class="px-4 py-2 text-left">List</th>
      <th class="px-4 py-2 text-left">Description</th>
      <th class="px-4 py-2 text-left">Type</th>
      <th class="px-4 py-2 text-left">Urgency</th>
      <th class="px-4 py-2 text-left">Members</th>
      <th class="px-4 py-2 text-left">Values</th>
      <th class="px-4 py-2 text-left">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @issues.each do |issue| %>
      <tr class="border-t">
        <td class="px-4 py-2"><%= issue.list_type %></td>
        <td class="px-4 py-2"><%= truncate(issue.description, length: 80) %></td>
        <td class="px-4 py-2">
          <% if issue.issue_type == "root" %>
            <span class="text-red-600 font-semibold">Root</span>
          <% else %>
            Symptom
          <% end %>
        </td>
        <td class="px-4 py-2"><%= issue.urgency %></td>
        <td class="px-4 py-2">
          <%= issue.members.map(&:name).join(", ") %>
        </td>
        <td class="px-4 py-2">
          <%= issue.family_values.map(&:name).join(", ") %>
        </td>
        <td class="px-4 py-2">
          <%= link_to "View", family_issue_path(@family, issue), class: "text-blue-600 hover:underline" %>
          |
          <%= link_to "Edit", edit_family_issue_path(@family, issue), class: "text-yellow-600 hover:underline" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= link_to "← Back to Dashboard", family_path(@family), class: "text-blue-600 hover:underline text-sm" %>